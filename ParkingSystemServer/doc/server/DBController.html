<!DOCTYPE HTML>
<html lang="he">
<head>
<!-- Generated by javadoc (17) on Wed Jul 09 18:53:47 IDT 2025 -->
<title>DBController</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2025-07-09">
<meta name="description" content="declaration: package: server, class: DBController">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
<script type="text/javascript" src="../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/DBController.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">server</a></div>
<h1 title="Class DBController" class="title">Class DBController</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">server.DBController</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">DBController</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">DBController handles database connectivity and operations related to user authentication,
 subscribers, reservations, and parking space management.
 <p>
 Provides convenient methods for performing database CRUD operations.
 </p></div>
<dl class="notes">
<dt>Author:</dt>
<dd>Ibrahem_Amar</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">DBController</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addReservationRandomSpotWithConfirmation(entities.Reservation)" class="member-name-link">addReservationRandomSpotWithConfirmation</a><wbr>(entities.Reservation&nbsp;reservationRequest)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Handles all logic for creating a reservation:
 - Checks if the subscriber already has a reservation within 4 hours
 - Finds a random free parking spot for the requested 4-hour time window
 - Generates a unique confirmation code
 - Inserts the reservation into the database
 - Sends a confirmation email to the subscriber</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addSubscriber(entities.Subscriber,java.lang.String,java.lang.String,java.lang.String)" class="member-name-link">addSubscriber</a><wbr>(entities.Subscriber&nbsp;subscriber,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;password,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;firstName,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;lastName)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Adds a new subscriber to the system by inserting into both users and subscriber tables.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#cancelReservation(int)" class="member-name-link">cancelReservation</a><wbr>(int&nbsp;reservationId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Cancels a reservation by updating its status to 'cancelled'.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#checkUserCredentials(java.lang.String,java.lang.String)" class="member-name-link">checkUserCredentials</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;password)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves the role of a user based on their credentials.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#completePickup(java.lang.String,int,boolean,java.time.LocalDateTime)" class="member-name-link">completePickup</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subscriberCode,
 int&nbsp;parkingSpaceId,
 boolean&nbsp;wasLate,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDateTime.html" title="class or interface in java.time" class="external-link">LocalDateTime</a>&nbsp;pickupTime)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Marks the parking session as picked up, updates exit time, and (if late) sets
 extended/was_late flags.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#generateMonthlyReports(int,int)" class="member-name-link">generateMonthlyReports</a><wbr>(int&nbsp;year,
 int&nbsp;month)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Generates and stores the monthly reports for a given year and month.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#generateUniqueConfirmationCode(java.sql.Connection)" class="member-name-link">generateUniqueConfirmationCode</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;conn)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Generates a unique 6-digit confirmation code that does not exist in the
 reservation table.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>entities.ParkingHistory</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getActiveParkingBySubscriber(java.lang.String)" class="member-name-link">getActiveParkingBySubscriber</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subscriberCode)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the current active parking session for the given subscriber.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;entities.ParkingHistory&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getAllActiveParkings()" class="member-name-link">getAllActiveParkings</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves all active (ongoing) parking sessions from the database.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;entities.Subscriber&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getAllSubscribers()" class="member-name-link">getAllSubscribers</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves all subscribers along with user account details.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;entities.SystemLog&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getAllSystemLogs()" class="member-name-link">getAllSystemLogs</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves all system logs from the database, ordered by most recent first.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;entities.ParkingSpace&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getAvailableParkingSpaces()" class="member-name-link">getAvailableParkingSpaces</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves a list of all available parking spaces.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalTime.html" title="class or interface in java.time" class="external-link">LocalTime</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getAvailableTimesForDate(java.time.LocalDate,java.lang.String)" class="member-name-link">getAvailableTimesForDate</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDate.html" title="class or interface in java.time" class="external-link">LocalDate</a>&nbsp;selectedDate,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subscriberCode)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a list of available time slots for the given date and subscriber,
 ensuring at least one actual parking spot is available for the whole 4-hour
 window (not just by overlap percentage).</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getConnection()" class="member-name-link">getConnection</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Retrieves a database connection from the singleton <a href="../utils/DBConnection.html" title="class in utils"><code>DBConnection</code></a> utility.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getNextSystemLogId()" class="member-name-link">getNextSystemLogId</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves the next available system log ID (max + 1).</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;entities.ParkingHistory&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getParkingHistoryForSubscriber(java.lang.String)" class="member-name-link">getParkingHistoryForSubscriber</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subscriberCode)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves the parking history for a given subscriber.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>entities.ParkingHistory</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getPendingParkingBySubscriberAndSpot(java.lang.String,int)" class="member-name-link">getPendingParkingBySubscriberAndSpot</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subscriberCode,
 int&nbsp;parkingSpaceId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves the most recent uncollected parking session for the subscriber and specific parking space.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getRandomAvailableSpotWithoutA()" class="member-name-link">getRandomAvailableSpotWithoutA</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves a random available parking space ID that does not have an active session
 overlapping the next 4 hours.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>entities.Reservation</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getReservationByConfirmationCode(java.lang.String)" class="member-name-link">getReservationByConfirmationCode</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;code)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves an active reservation from the database by confirmation code.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>entities.Subscriber</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getSubscriberByCode(java.lang.String)" class="member-name-link">getSubscriberByCode</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subscriberCode)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves a Subscriber object from the database using the given subscriber code.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>entities.Subscriber</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getSubscriberByUsername(java.lang.String)" class="member-name-link">getSubscriberByUsername</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves a Subscriber object from the database using their username.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getSubscriberContactByCode(java.lang.String)" class="member-name-link">getSubscriberContactByCode</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subscriberCode)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves the email and phone number of a subscriber by their subscriber code.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getSubscriberEmail(java.lang.String)" class="member-name-link">getSubscriberEmail</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subscriberCode)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Convenience method to get a subscriber's email by code, opening its own connection.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getSubscriberEmail(java.sql.Connection,java.lang.String)" class="member-name-link">getSubscriberEmail</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;conn,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subscriberCode)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves the subscriber's email address based on their subscriber code.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getUserCredentialsByUserId(java.lang.String)" class="member-name-link">getUserCredentialsByUserId</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;userId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves username and password by user ID.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getUserIdByUsername(java.lang.String)" class="member-name-link">getUserIdByUsername</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves the user ID by username.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#hasActiveReservation(java.lang.String)" class="member-name-link">hasActiveReservation</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subscriberCode)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Checks if a subscriber has an active parking reservation.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#insertParkingFromReservation(entities.Reservation,java.time.LocalDateTime,java.time.LocalDateTime)" class="member-name-link">insertParkingFromReservation</a><wbr>(entities.Reservation&nbsp;reservation,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDateTime.html" title="class or interface in java.time" class="external-link">LocalDateTime</a>&nbsp;entryTime,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDateTime.html" title="class or interface in java.time" class="external-link">LocalDateTime</a>&nbsp;exitTime)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Inserts a parking history record using reservation data.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#insertParkingHistory(entities.ParkingHistory)" class="member-name-link">insertParkingHistory</a><wbr>(entities.ParkingHistory&nbsp;history)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Inserts a new parking history record into the database.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#insertSubscriberSystemLog(java.lang.String,java.lang.String,int)" class="member-name-link">insertSubscriberSystemLog</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;action,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;target,
 int&nbsp;byUserId)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Inserts a system log record for subscriber insertion.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#insertSystemLog(java.lang.String,java.lang.String,java.lang.String)" class="member-name-link">insertSystemLog</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;action,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;target,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subscriberCode)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Inserts a system log entry for the specified action and subscriber.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isReservationConflict(int,java.time.LocalDateTime,java.time.LocalDateTime)" class="member-name-link">isReservationConflict</a><wbr>(int&nbsp;parkingSpaceId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDateTime.html" title="class or interface in java.time" class="external-link">LocalDateTime</a>&nbsp;currentExit,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDateTime.html" title="class or interface in java.time" class="external-link">LocalDateTime</a>&nbsp;newExit)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Checks if there is a reservation conflict in the given time window for a specific parking space.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isReservationPossible()" class="member-name-link">isReservationPossible</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Checks if at least 40% of parking spots are available.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static entities.MonthlyParkingTimeReport</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#loadMonthlyParkingTimeReport(int,int)" class="member-name-link">loadMonthlyParkingTimeReport</a><wbr>(int&nbsp;year,
 int&nbsp;month)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Loads a MonthlyParkingTimeReport from the database for the given year and month.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static entities.MonthlySubscriberReport</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#loadMonthlySubscriberReport(int,int)" class="member-name-link">loadMonthlySubscriberReport</a><wbr>(int&nbsp;year,
 int&nbsp;month)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Loads a MonthlySubscriberReport from the database for the given year and month.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>entities.ParkingHistory</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#mapParkingHistory(java.sql.ResultSet)" class="member-name-link">mapParkingHistory</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/ResultSet.html" title="class or interface in java.sql" class="external-link">ResultSet</a>&nbsp;rs)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Maps the given ResultSet to a ParkingHistory object.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>entities.ParkingSpace</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#mapParkingSpace(java.sql.ResultSet)" class="member-name-link">mapParkingSpace</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/ResultSet.html" title="class or interface in java.sql" class="external-link">ResultSet</a>&nbsp;rs)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Maps the given ResultSet to a ParkingSpace object.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>entities.Subscriber</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#mapSubscriber(java.sql.ResultSet)" class="member-name-link">mapSubscriber</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/ResultSet.html" title="class or interface in java.sql" class="external-link">ResultSet</a>&nbsp;rs)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Maps the given ResultSet to a Subscriber object.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#markReservationExpired(int)" class="member-name-link">markReservationExpired</a><wbr>(int&nbsp;reservationId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Marks a reservation as expired (used or time has passed).</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#releaseConnection(java.sql.Connection)" class="member-name-link">releaseConnection</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;conn)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Releases a database connection back to the pool.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setSpotAvailability(int,boolean)" class="member-name-link">setSpotAvailability</a><wbr>(int&nbsp;parkingSpaceId,
 boolean&nbsp;isAvailable)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Updates the availability status of a parking space.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateExitTime(java.lang.String,java.time.LocalDateTime)" class="member-name-link">updateExitTime</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subscriberCode,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDateTime.html" title="class or interface in java.time" class="external-link">LocalDateTime</a>&nbsp;newExitTime)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Updates the exit time for the subscriber's latest parking session and marks it as extended.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateSubscriberInfo(entities.Subscriber)" class="member-name-link">updateSubscriberInfo</a><wbr>(entities.Subscriber&nbsp;subscriber)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Updates a subscriber's email and phone number in the database.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#validateUser(java.lang.String,java.lang.String)" class="member-name-link">validateUser</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;password)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Validates a user's credentials against the database.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>DBController</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">DBController</span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getConnection()">
<h3>getConnection</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a></span>&nbsp;<span class="element-name">getConnection</span>()
                                throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">Retrieves a database connection from the singleton <a href="../utils/DBConnection.html" title="class in utils"><code>DBConnection</code></a> utility.
 <p>
 The connection returned must be closed after use to prevent resource leaks.
 </p></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>an active database connection</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - if unable to establish a connection to the database</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="releaseConnection(java.sql.Connection)">
<h3>releaseConnection</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">releaseConnection</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;conn)</span></div>
<div class="block">Releases a database connection back to the pool.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>conn</code> - the connection to release</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="mapParkingHistory(java.sql.ResultSet)">
<h3>mapParkingHistory</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">entities.ParkingHistory</span>&nbsp;<span class="element-name">mapParkingHistory</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/ResultSet.html" title="class or interface in java.sql" class="external-link">ResultSet</a>&nbsp;rs)</span>
                                          throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">Maps the given ResultSet to a ParkingHistory object.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>rs</code> - the ResultSet containing parking history data</dd>
<dt>Returns:</dt>
<dd>a ParkingHistory object mapped from the result set</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - if a database access error occurs</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="mapParkingSpace(java.sql.ResultSet)">
<h3>mapParkingSpace</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">entities.ParkingSpace</span>&nbsp;<span class="element-name">mapParkingSpace</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/ResultSet.html" title="class or interface in java.sql" class="external-link">ResultSet</a>&nbsp;rs)</span>
                                      throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">Maps the given ResultSet to a ParkingSpace object.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>rs</code> - the ResultSet containing parking space data</dd>
<dt>Returns:</dt>
<dd>a ParkingSpace object mapped from the result set</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - if a database access error occurs</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="mapSubscriber(java.sql.ResultSet)">
<h3>mapSubscriber</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">entities.Subscriber</span>&nbsp;<span class="element-name">mapSubscriber</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/ResultSet.html" title="class or interface in java.sql" class="external-link">ResultSet</a>&nbsp;rs)</span>
                                  throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">Maps the given ResultSet to a Subscriber object.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>rs</code> - the ResultSet containing subscriber data</dd>
<dt>Returns:</dt>
<dd>a Subscriber object mapped from the result set</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - if a database access error occurs</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="validateUser(java.lang.String,java.lang.String)">
<h3>validateUser</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">validateUser</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;password)</span></div>
<div class="block">Validates a user's credentials against the database.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>username</code> - the username to validate</dd>
<dd><code>password</code> - the password to validate</dd>
<dt>Returns:</dt>
<dd>true if the credentials are valid, false otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="checkUserCredentials(java.lang.String,java.lang.String)">
<h3>checkUserCredentials</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">checkUserCredentials</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;password)</span></div>
<div class="block">Retrieves the role of a user based on their credentials.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>username</code> - the username</dd>
<dd><code>password</code> - the password</dd>
<dt>Returns:</dt>
<dd>the user's role if found, otherwise null</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAvailableParkingSpaces()">
<h3>getAvailableParkingSpaces</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;entities.ParkingSpace&gt;</span>&nbsp;<span class="element-name">getAvailableParkingSpaces</span>()</div>
<div class="block">Retrieves a list of all available parking spaces.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>list of available ParkingSpace objects</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getSubscriberByUsername(java.lang.String)">
<h3>getSubscriberByUsername</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">entities.Subscriber</span>&nbsp;<span class="element-name">getSubscriberByUsername</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username)</span></div>
<div class="block">Retrieves a Subscriber object from the database using their username.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>username</code> - the subscriber's username</dd>
<dt>Returns:</dt>
<dd>Subscriber object if found, null otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateSubscriberInfo(entities.Subscriber)">
<h3>updateSubscriberInfo</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">updateSubscriberInfo</span><wbr><span class="parameters">(entities.Subscriber&nbsp;subscriber)</span></div>
<div class="block">Updates a subscriber's email and phone number in the database.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>subscriber</code> - the subscriber to update</dd>
<dt>Returns:</dt>
<dd>true if the update was successful, false otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getParkingHistoryForSubscriber(java.lang.String)">
<h3>getParkingHistoryForSubscriber</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;entities.ParkingHistory&gt;</span>&nbsp;<span class="element-name">getParkingHistoryForSubscriber</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subscriberCode)</span></div>
<div class="block">Retrieves the parking history for a given subscriber.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>subscriberCode</code> - the code of the subscriber</dd>
<dt>Returns:</dt>
<dd>list of ParkingHistory records</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getRandomAvailableSpotWithoutA()">
<h3>getRandomAvailableSpotWithoutA</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getRandomAvailableSpotWithoutA</span>()</div>
<div class="block">Retrieves a random available parking space ID that does not have an active session
 overlapping the next 4 hours.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the parking space ID, or -1 if none available</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setSpotAvailability(int,boolean)">
<h3>setSpotAvailability</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setSpotAvailability</span><wbr><span class="parameters">(int&nbsp;parkingSpaceId,
 boolean&nbsp;isAvailable)</span></div>
<div class="block">Updates the availability status of a parking space.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>parkingSpaceId</code> - the ID of the parking space</dd>
<dd><code>isAvailable</code> - true to mark as available, false to mark as occupied</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getSubscriberByCode(java.lang.String)">
<h3>getSubscriberByCode</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">entities.Subscriber</span>&nbsp;<span class="element-name">getSubscriberByCode</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subscriberCode)</span>
                                        throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">Retrieves a Subscriber object from the database using the given subscriber code.
 This method is used to refresh the subscriber's data (e.g., email or phone) from the DB.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>subscriberCode</code> - The unique subscriber code to look up.</dd>
<dt>Returns:</dt>
<dd>A Subscriber object if found; otherwise, null.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - If a database access error occurs.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="insertSystemLog(java.lang.String,java.lang.String,java.lang.String)">
<h3>insertSystemLog</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">insertSystemLog</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;action,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;target,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subscriberCode)</span></div>
<div class="block">Inserts a system log entry for the specified action and subscriber.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>action</code> - the action performed</dd>
<dd><code>target</code> - the target entity</dd>
<dd><code>subscriberCode</code> - the subscriber's unique code</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="insertParkingHistory(entities.ParkingHistory)">
<h3>insertParkingHistory</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">insertParkingHistory</span><wbr><span class="parameters">(entities.ParkingHistory&nbsp;history)</span></div>
<div class="block">Inserts a new parking history record into the database.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>history</code> - the parking history to insert</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="hasActiveReservation(java.lang.String)">
<h3>hasActiveReservation</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">hasActiveReservation</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subscriberCode)</span></div>
<div class="block">Checks if a subscriber has an active parking reservation.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>subscriberCode</code> - the subscriber's unique code</dd>
<dt>Returns:</dt>
<dd>true if there is an active reservation; false otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getActiveParkingBySubscriber(java.lang.String)">
<h3>getActiveParkingBySubscriber</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">entities.ParkingHistory</span>&nbsp;<span class="element-name">getActiveParkingBySubscriber</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subscriberCode)</span></div>
<div class="block">Returns the current active parking session for the given subscriber.
 An active session is defined as: entry_time &lt;= NOW() &lt;= exit_time AND picked_up = 0</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>subscriberCode</code> - The code of the subscriber.</dd>
<dt>Returns:</dt>
<dd>The active ParkingHistory record, or null if none found.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isReservationConflict(int,java.time.LocalDateTime,java.time.LocalDateTime)">
<h3>isReservationConflict</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isReservationConflict</span><wbr><span class="parameters">(int&nbsp;parkingSpaceId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDateTime.html" title="class or interface in java.time" class="external-link">LocalDateTime</a>&nbsp;currentExit,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDateTime.html" title="class or interface in java.time" class="external-link">LocalDateTime</a>&nbsp;newExit)</span></div>
<div class="block">Checks if there is a reservation conflict in the given time window for a specific parking space.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>parkingSpaceId</code> - The ID of the parking space to check.</dd>
<dd><code>currentExit</code> - The current reservation exit time.</dd>
<dd><code>newExit</code> - The proposed new exit time.</dd>
<dt>Returns:</dt>
<dd>true if a conflict exists; false otherwise.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateExitTime(java.lang.String,java.time.LocalDateTime)">
<h3>updateExitTime</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">updateExitTime</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subscriberCode,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDateTime.html" title="class or interface in java.time" class="external-link">LocalDateTime</a>&nbsp;newExitTime)</span></div>
<div class="block">Updates the exit time for the subscriber's latest parking session and marks it as extended.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>subscriberCode</code> - the subscriber's unique code</dd>
<dd><code>newExitTime</code> - the new exit time to set</dd>
<dt>Returns:</dt>
<dd>number of rows updated (should be 1 if successful)</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getPendingParkingBySubscriberAndSpot(java.lang.String,int)">
<h3>getPendingParkingBySubscriberAndSpot</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">entities.ParkingHistory</span>&nbsp;<span class="element-name">getPendingParkingBySubscriberAndSpot</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subscriberCode,
 int&nbsp;parkingSpaceId)</span></div>
<div class="block">Retrieves the most recent uncollected parking session for the subscriber and specific parking space.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>subscriberCode</code> - the subscriber's code</dd>
<dd><code>parkingSpaceId</code> - the parking space ID</dd>
<dt>Returns:</dt>
<dd>the pending ParkingHistory record or null if not found</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="completePickup(java.lang.String,int,boolean,java.time.LocalDateTime)">
<h3>completePickup</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">completePickup</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subscriberCode,
 int&nbsp;parkingSpaceId,
 boolean&nbsp;wasLate,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDateTime.html" title="class or interface in java.time" class="external-link">LocalDateTime</a>&nbsp;pickupTime)</span></div>
<div class="block">Marks the parking session as picked up, updates exit time, and (if late) sets
 extended/was_late flags.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>subscriberCode</code> - The subscriber's code</dd>
<dd><code>parkingSpaceId</code> - The parking spot ID</dd>
<dd><code>wasLate</code> - True if pickup is late</dd>
<dd><code>pickupTime</code> - The actual pickup time (now)</dd>
<dt>Returns:</dt>
<dd>number of rows updated (should be 1 if successful)</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isReservationPossible()">
<h3>isReservationPossible</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isReservationPossible</span>()</div>
<div class="block">Checks if at least 40% of parking spots are available.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if reservation is possible (ג‰¥ 40%), false otherwise.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAvailableTimesForDate(java.time.LocalDate,java.lang.String)">
<h3>getAvailableTimesForDate</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalTime.html" title="class or interface in java.time" class="external-link">LocalTime</a>&gt;</span>&nbsp;<span class="element-name">getAvailableTimesForDate</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDate.html" title="class or interface in java.time" class="external-link">LocalDate</a>&nbsp;selectedDate,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subscriberCode)</span></div>
<div class="block">Returns a list of available time slots for the given date and subscriber,
 ensuring at least one actual parking spot is available for the whole 4-hour
 window (not just by overlap percentage). The returned times are only those
 where 40% or more of the spots are available for the entire slot.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>selectedDate</code> - The date to check.</dd>
<dd><code>subscriberCode</code> - The subscriber making the request.</dd>
<dt>Returns:</dt>
<dd>A list of available LocalTime slots for reservation.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="addReservationRandomSpotWithConfirmation(entities.Reservation)">
<h3>addReservationRandomSpotWithConfirmation</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">addReservationRandomSpotWithConfirmation</span><wbr><span class="parameters">(entities.Reservation&nbsp;reservationRequest)</span></div>
<div class="block">Handles all logic for creating a reservation:
 - Checks if the subscriber already has a reservation within 4 hours
 - Finds a random free parking spot for the requested 4-hour time window
 - Generates a unique confirmation code
 - Inserts the reservation into the database
 - Sends a confirmation email to the subscriber</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>reservationRequest</code> - Reservation object from client (without assigned spot ID or confirmation code)</dd>
<dt>Returns:</dt>
<dd>true if the reservation was created successfully, false otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="generateUniqueConfirmationCode(java.sql.Connection)">
<h3>generateUniqueConfirmationCode</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">generateUniqueConfirmationCode</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;conn)</span>
                                   throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">Generates a unique 6-digit confirmation code that does not exist in the
 reservation table.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>conn</code> - Active database connection</dd>
<dt>Returns:</dt>
<dd>A unique confirmation code</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - If a database access error occurs</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getSubscriberEmail(java.sql.Connection,java.lang.String)">
<h3>getSubscriberEmail</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">getSubscriberEmail</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;conn,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subscriberCode)</span>
                          throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">Retrieves the subscriber's email address based on their subscriber code.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>conn</code> - Active database connection</dd>
<dd><code>subscriberCode</code> - The subscriber's unique code</dd>
<dt>Returns:</dt>
<dd>Email address if found, or null if not found</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - If a database access error occurs</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getSubscriberEmail(java.lang.String)">
<h3>getSubscriberEmail</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">getSubscriberEmail</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subscriberCode)</span></div>
<div class="block">Convenience method to get a subscriber's email by code, opening its own connection.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>subscriberCode</code> - The subscriber code.</dd>
<dt>Returns:</dt>
<dd>The email address, or null if not found.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getUserCredentialsByUserId(java.lang.String)">
<h3>getUserCredentialsByUserId</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</span>&nbsp;<span class="element-name">getUserCredentialsByUserId</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;userId)</span></div>
<div class="block">Retrieves username and password by user ID.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>userId</code> - The user ID (from the scanned tag).</dd>
<dt>Returns:</dt>
<dd>{username, password} if found; null otherwise.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAllActiveParkings()">
<h3>getAllActiveParkings</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;entities.ParkingHistory&gt;</span>&nbsp;<span class="element-name">getAllActiveParkings</span>()</div>
<div class="block">Retrieves all active (ongoing) parking sessions from the database.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a list of ParkingHistory objects for active parkings</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAllSubscribers()">
<h3>getAllSubscribers</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;entities.Subscriber&gt;</span>&nbsp;<span class="element-name">getAllSubscribers</span>()</div>
<div class="block">Retrieves all subscribers along with user account details.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a list of Subscriber objects</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="addSubscriber(entities.Subscriber,java.lang.String,java.lang.String,java.lang.String)">
<h3>addSubscriber</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">addSubscriber</span><wbr><span class="parameters">(entities.Subscriber&nbsp;subscriber,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;password,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;firstName,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;lastName)</span></div>
<div class="block">Adds a new subscriber to the system by inserting into both users and subscriber tables.
 Rolls back the transaction on failure.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>subscriber</code> - the subscriber entity</dd>
<dd><code>password</code> - the account password</dd>
<dd><code>firstName</code> - the user's first name</dd>
<dd><code>lastName</code> - the user's last name</dd>
<dt>Returns:</dt>
<dd>true if successfully added, false otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="insertSubscriberSystemLog(java.lang.String,java.lang.String,int)">
<h3>insertSubscriberSystemLog</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">insertSubscriberSystemLog</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;action,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;target,
 int&nbsp;byUserId)</span></div>
<div class="block">Inserts a system log record for subscriber insertion.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>action</code> - the action performed</dd>
<dd><code>target</code> - the affected object</dd>
<dd><code>byUserId</code> - the ID of the user who performed the action</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getNextSystemLogId()">
<h3>getNextSystemLogId</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getNextSystemLogId</span>()</div>
<div class="block">Retrieves the next available system log ID (max + 1).</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the next log ID, or 1 if the table is empty or error occurs</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getUserIdByUsername(java.lang.String)">
<h3>getUserIdByUsername</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getUserIdByUsername</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username)</span></div>
<div class="block">Retrieves the user ID by username.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>username</code> - the username to search for</dd>
<dt>Returns:</dt>
<dd>the user ID if found, or -1 if not found or error occurs</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAllSystemLogs()">
<h3>getAllSystemLogs</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;entities.SystemLog&gt;</span>&nbsp;<span class="element-name">getAllSystemLogs</span>()</div>
<div class="block">Retrieves all system logs from the database, ordered by most recent first.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a list of SystemLog objects</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getSubscriberContactByCode(java.lang.String)">
<h3>getSubscriberContactByCode</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</span>&nbsp;<span class="element-name">getSubscriberContactByCode</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subscriberCode)</span>
                                              throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">Retrieves the email and phone number of a subscriber by their subscriber code.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>subscriberCode</code> - The unique subscriber code.</dd>
<dt>Returns:</dt>
<dd>A map containing "email" and "phone" keys if found, or null otherwise.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - if a database access error occurs</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getReservationByConfirmationCode(java.lang.String)">
<h3>getReservationByConfirmationCode</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">entities.Reservation</span>&nbsp;<span class="element-name">getReservationByConfirmationCode</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;code)</span></div>
<div class="block">Retrieves an active reservation from the database by confirmation code.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>code</code> - the confirmation code entered by the subscriber</dd>
<dt>Returns:</dt>
<dd>a Reservation object if found and active; otherwise null</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="markReservationExpired(int)">
<h3>markReservationExpired</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">markReservationExpired</span><wbr><span class="parameters">(int&nbsp;reservationId)</span></div>
<div class="block">Marks a reservation as expired (used or time has passed).</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>reservationId</code> - the reservation ID to update</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="insertParkingFromReservation(entities.Reservation,java.time.LocalDateTime,java.time.LocalDateTime)">
<h3>insertParkingFromReservation</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">insertParkingFromReservation</span><wbr><span class="parameters">(entities.Reservation&nbsp;reservation,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDateTime.html" title="class or interface in java.time" class="external-link">LocalDateTime</a>&nbsp;entryTime,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDateTime.html" title="class or interface in java.time" class="external-link">LocalDateTime</a>&nbsp;exitTime)</span></div>
<div class="block">Inserts a parking history record using reservation data.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>reservation</code> - the reservation object to base the parking on</dd>
<dd><code>entryTime</code> - the actual time the subscriber entered</dd>
<dd><code>exitTime</code> - the planned exit time (usually 4 hours after reservation)</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="cancelReservation(int)">
<h3>cancelReservation</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">cancelReservation</span><wbr><span class="parameters">(int&nbsp;reservationId)</span></div>
<div class="block">Cancels a reservation by updating its status to 'cancelled'.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>reservationId</code> - the ID of the reservation to cancel</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="loadMonthlyParkingTimeReport(int,int)">
<h3>loadMonthlyParkingTimeReport</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">entities.MonthlyParkingTimeReport</span>&nbsp;<span class="element-name">loadMonthlyParkingTimeReport</span><wbr><span class="parameters">(int&nbsp;year,
 int&nbsp;month)</span></div>
<div class="block">Loads a MonthlyParkingTimeReport from the database for the given year and month.
 This retrieves the normal, extended, and delayed hours from the aggregated
 monthly_parking_time_report table, and returns it as a MonthlyParkingTimeReport entity.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>year</code> - the year to load</dd>
<dd><code>month</code> - the month to load</dd>
<dt>Returns:</dt>
<dd>a MonthlyParkingTimeReport if found, null otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="loadMonthlySubscriberReport(int,int)">
<h3>loadMonthlySubscriberReport</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">entities.MonthlySubscriberReport</span>&nbsp;<span class="element-name">loadMonthlySubscriberReport</span><wbr><span class="parameters">(int&nbsp;year,
 int&nbsp;month)</span></div>
<div class="block">Loads a MonthlySubscriberReport from the database for the given year and month.
 This retrieves the CSV-like daily subscriber counts from the
 monthly_subscriber_report table and converts them into a list of integers.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>year</code> - the year to load</dd>
<dd><code>month</code> - the month to load</dd>
<dt>Returns:</dt>
<dd>a MonthlySubscriberReport if found, null otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="generateMonthlyReports(int,int)">
<h3>generateMonthlyReports</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">generateMonthlyReports</span><wbr><span class="parameters">(int&nbsp;year,
 int&nbsp;month)</span></div>
<div class="block">Generates and stores the monthly reports for a given year and month.
 It aggregates:
  - normal parking hours
  - extended parking hours
  - delayed parking hours
  from the parking_history table, and also
  - daily subscriber parking counts
 storing them into the monthly_parking_time_report and
 monthly_subscriber_report tables with upsert logic.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>year</code> - the year to generate</dd>
<dd><code>month</code> - the month to generate</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
